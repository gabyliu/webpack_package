{"version":3,"sources":["webpack:///widgets/fileUploader/index.6fb9.js","webpack:///webpack/bootstrap 6fb9adce7f75dc4968ab","webpack:///./F:/一些尝试/component/webpack_package/src/widgets/fileUploader/index.js?bbb5"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","0","5","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","Inner","SingleFilePick","ImagePick","undefined","_React$createClass","React","createClass","displayName","getInitialState","img","this","props","data","load","show","progress","isDragover","isHover","handleClick","refs","imagePickInput","getDOMNode","click","handleChange","e","fileList","target","files","showPreview","fileStatus","checkPattern","isPass","upload","response","status","file","reader","FileReader","readAsDataURL","onload","setState","result","bind","handleDragOver","stopPropagation","preventDefault","handleDrop","dt","dataTransfer","console","log","JSON","stringify","length","fileType","type","indexOf","replace","reg","format","size","handleDragLeave","uploading","total","d","index","responseValue","handle","_this","xhr","XMLHttpRequest","addEventListener","FormData","item","requestValue","append","name","lastModifiedDate","open","send","onreadystatechange","readyState","parse","handleMouseoverPick","state","handleMouseleavePick","handleClickDele","preview","render","classArea","extendClass","contentPickBtn","loadStyle","width","imagePickLoadArea","createElement","className","style","imagePickDeleArea","isNeedDele","href","onClick","text","dragover","onMouseOver","onMouseLeave","onDragLeave","onDragOver","onDrop","ref","onChange","src","substring","setting","request","base_resp","ret","classname","uploaderBtnContent","errMsg","label","_setting","isOpen","ImagePick1ImagePick","normal","hover","url","mediaType","mediaType2","mediaType3","v","handleImageChange","handleFile","stateResult","handleClickOpenSetting","stateIsopen","settingImagePick","settingSingleFilePick","document","getElementById","14"],"mappings":"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","file":"widgets\\fileUploader\\index.6fb9.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 0:\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(5);\n\n\n/***/ },\n\n/***/ 5:\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.Inner = exports.SingleFilePick = exports.ImagePick = undefined;\n\t\n\tvar _React$createClass;\n\t\n\t__webpack_require__(14);\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tvar ImagePick = React.createClass({\n\t    displayName: 'ImagePick',\n\t\n\t    getInitialState: function getInitialState() {\n\t        return {\n\t            img: this.props.data.img,\n\t            load: {\n\t                show: 0,\n\t                progress: 0\n\t            },\n\t\n\t            isDragover: 0,\n\t            isHover: 0\n\t        };\n\t    },\n\t    handleClick: function handleClick() {\n\t        this.refs.imagePickInput.getDOMNode().click();\n\t    },\n\t    //µã»÷ÉÏ´«\n\t    handleChange: function handleChange(e) {\n\t        var fileList = e.target.files;\n\t        this.showPreview(fileList[0]);\n\t\n\t        var fileStatus = this.checkPattern(fileList[0]);\n\t        if (fileStatus.isPass) {\n\t            //·ûºÏ¸ñÊ½\n\t            this.upload(fileList[0]);\n\t        } else {\n\t            //²»·ûºÏ¸ñÊ½\n\t            this.response(null, fileStatus.status);\n\t        }\n\t    },\n\t    //Õ¹Ê¾Ô¤ÀÀÍ¼\n\t    showPreview: function showPreview(file) {\n\t        var reader = new FileReader();\n\t        reader.readAsDataURL(file);\n\t        reader.onload = function (e) {\n\t            this.setState({\n\t                img: reader.result\n\t            });\n\t        }.bind(this);\n\t    },\n\t    //ÍÏµ½ÉÏÃæ\n\t    handleDragOver: function handleDragOver(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        this.setState({\n\t            isDragover: 1\n\t        });\n\t    },\n\t    //ÒÑ¾­¶ª½øÈ¥\n\t    handleDrop: function handleDrop(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        this.setState({\n\t            isDragover: 0\n\t        });\n\t        var dt = e.dataTransfer;\n\t        var files = dt.files;\n\t        console.log(JSON.stringify(dt));\n\t        this.showPreview(files[files.length - 1]);\n\t\n\t        var fileStatus = this.checkPattern(files[files.length - 1]);\n\t        if (fileStatus.isPass) {\n\t            //·ûºÏ¸ñÊ½\n\t\n\t            this.upload(files[files.length - 1]);\n\t            files[files.length - 1] = false;\n\t        } else {\n\t            //²»·ûºÏ¸ñÊ½\n\t            this.response(null, fileStatus.status);\n\t        }\n\t        return false;\n\t    },\n\t    //¼ì²éÎÄ¼þ¸ñÊ½\n\t    checkPattern: function checkPattern(file) {\n\t        var fileType = file.type,\n\t            response = {};\n\t        if (fileType.indexOf('image/') >= 0) {\n\t            //ÊÇÍ¼Æ¬\n\t            fileType = fileType.replace('image/', '');\n\t            if (this.props.data.reg.format.indexOf(fileType) >= 0) {\n\t                //·ûºÏÍ¼Æ¬¸ñÊ½\n\t                if (this.props.data.reg.size) {\n\t                    //ÓÐ´óÐ¡ÏÞÖÆ\n\t                    if (this.props.data.reg.size >= file.size) {\n\t                        response.isPass = true;\n\t                    } else {\n\t                        response.isPass = false;\n\t                        response.status = 'oversized';\n\t                    }\n\t                } else {\n\t                    //Ã»ÓÐ´óÐ¡ÏÞÖÆ\n\t                    response.isPass = true;\n\t                }\n\t            } else {\n\t                //²»·ûºÏÍ¼Æ¬¸ñÊ½\n\t                response.isPass = false;\n\t                response.status = 'format error';\n\t            }\n\t        } else {\n\t            //²»ÊÇÍ¼Æ¬ ¸ñÊ½´íÎó\n\t            response.isPass = false;\n\t            response.status = 'format error';\n\t        }\n\t        return response;\n\t    },\n\t    //ÍÏ×§Àë¿ª\n\t    handleDragLeave: function handleDragLeave(e) {\n\t        this.setState({\n\t            isDragover: 0\n\t        });\n\t    },\n\t    //ÉÏ´«ÖÐ\n\t    uploading: function uploading(loaded, total) {\n\t\n\t        this.setState({\n\t            load: {\n\t                show: 1,\n\t                progress: loaded / total\n\t            }\n\t        });\n\t    },\n\t    //²»¹Ü³É¹¦Ê§°Ü£¬ÕâÀïÅ×ÊÂ¼þ\n\t    response: function response(d, status) {\n\t        this.setState({\n\t            load: {\n\t                show: 0\n\t            }\n\t        });\n\t        var data = {\n\t            index: this.props.data.responseValue,\n\t            status: status,\n\t            value: d\n\t        };\n\t        this.props.data.handle(data);\n\t    },\n\t    //ÉÏ´«Í¼Æ¬µ½·þÎñÆ÷\n\t    upload: function upload(file) {\n\t        (function (file, _this) {\n\t            var xhr = new XMLHttpRequest(),\n\t                reader = new FileReader();\n\t            if (xhr.upload) {\n\t                // ÉÏ´«ÖÐ\n\t                xhr.upload.addEventListener(\"progress\", function (e) {\n\t                    _this.uploading(e.loaded, e.total);\n\t                }, false);\n\t                // ¿ªÊ¼ÉÏ´«\n\t                var data = new FormData();\n\t                for (var item in _this.props.data.requestValue) {\n\t                    data.append(item, _this.props.data.requestValue[item]);\n\t                }\n\t                data.append('file', file);\n\t                data.append('name', file.name);\n\t                data.append('type', file.type);\n\t                data.append('lastModifiedDate', file.lastModifiedDate);\n\t                data.append('size', file.size);\n\t                xhr.open(\"POST\", '/cgi-bin/mmemoticonmgr-bin/uploadmedia', true);\n\t                xhr.send(data);\n\t                // ÎÄ¼þÉÏ´«³É¹¦»òÊÇÊ§°Ü\n\t                xhr.onreadystatechange = function (e) {\n\t                    if (xhr.readyState == 4) {\n\t                        if (xhr.status == 200) {\n\t                            _this.response(JSON.parse(xhr.response), 'suc');\n\t                        }\n\t                    }\n\t                };\n\t            }\n\t        })(file, this);\n\t    },\n\t    //Êó±êÔÚ×é¼þÉÏ\n\t    handleMouseoverPick: function handleMouseoverPick(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        if (this.state.isHover != 1) {\n\t            this.setState({\n\t                isHover: 1\n\t            });\n\t        }\n\t    },\n\t    //Êó±êÀë¿ª\n\t    handleMouseleavePick: function handleMouseleavePick(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        this.setState({\n\t            isHover: 0\n\t        });\n\t    },\n\t    //É¾³ýÊÂ¼þ\n\t    handleClickDele: function handleClickDele(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        var data = {\n\t            index: this.props.data.responseValue,\n\t            status: 'dele',\n\t            value: null\n\t        };\n\t        this.props.data.handle(data);\n\t        this.setState({\n\t            preview: null\n\t        });\n\t    },\n\t    render: function render() {\n\t        var classArea = 'imagePickArea ' + this.props.data.extendClass,\n\t            contentPickBtn = '+',\n\t            loadStyle = {\n\t            width: this.state.load.progress * 100 + '%'\n\t        },\n\t            imagePickLoadArea = this.state.load.show == 1 ? React.createElement(\n\t            'div',\n\t            { className: 'imagePickLoadArea' },\n\t            React.createElement(\n\t                'div',\n\t                { className: 'loadBar' },\n\t                React.createElement('div', { className: 'loadContent', style: loadStyle })\n\t            )\n\t        ) : null,\n\t\n\t        //ÊÇ·ñÐèÒªÉ¾³ý\n\t        imagePickDeleArea = this.props.data.isNeedDele && this.state.img && this.state.isHover == 1 ? React.createElement(\n\t            'div',\n\t            { className: 'imagePickDeleArea' },\n\t            React.createElement(\n\t                'a',\n\t                { href: 'javascript:;', className: 'btn btn_warn', onClick: this.handleClickDele },\n\t                '\\u5220\\u9664'\n\t            )\n\t        ) : null;\n\t\n\t        this.state.isHover == 1 ? classArea += ' hover' : null;\n\t        if (this.state.isDragover == 1) {\n\t            classArea += ' dragover';\n\t            this.props.data.text.dragover ? contentPickBtn = this.props.data.text.dragover : null;\n\t        }\n\t        /*mouseover mouseleave·ÅÔÚ imagePick ÕâÒ»²ã»áÒ»Ö±´¥·¢*/\n\t        return React.createElement(\n\t            'div',\n\t            { className: classArea, onMouseOver: this.handleMouseoverPick, onMouseLeave: this.handleMouseleavePick, onDragLeave: this.handleDragLeave, onClick: this.handleClick, onDragOver: this.handleDragOver, onDrop: this.handleDrop },\n\t            React.createElement(\n\t                'div',\n\t                { className: 'imagePick' },\n\t                React.createElement('input', { ref: 'imagePickInput', onChange: this.handleChange, className: 'imagePickUploader_input', type: 'file' }),\n\t                React.createElement(\n\t                    'div',\n\t                    { className: 'imagePickUploader_btn' },\n\t                    contentPickBtn\n\t                ),\n\t                this.state.img ? React.createElement('img', { className: 'imagePickUploader_preview', ref: 'imagePickUploader_preview', src: this.state.img }) : null\n\t            ),\n\t            imagePickDeleArea,\n\t            imagePickLoadArea\n\t        );\n\t    }\n\t});\n\t\n\t//单文件上传\n\tvar SingleFilePick = React.createClass((_React$createClass = {\n\t    displayName: 'SingleFilePick',\n\t\n\t    getInitialState: function getInitialState() {\n\t        console.log('SingleFilePick getInitialState');\n\t        return {\n\t            preview: this.props.data.preview,\n\t            load: {\n\t                show: 0,\n\t                progress: 0\n\t            },\n\t            status: '',\n\t            isDragover: 0,\n\t            isHover: 0\n\t        };\n\t    },\n\t    uploading: function uploading(loaded, total) {\n\t        console.log('uploading');\n\t        this.setState({\n\t            load: {\n\t                show: 1,\n\t                progress: loaded / total\n\t            }\n\t        });\n\t    },\n\t    upload: function upload(file) {\n\t        console.log('upload');\n\t        (function (file, _this) {\n\t            var xhr = new XMLHttpRequest(),\n\t                reader = new FileReader();\n\t            if (xhr.upload) {\n\t                // ÉÏ´«ÖÐ\n\t                xhr.upload.addEventListener(\"progress\", function (e) {\n\t                    _this.uploading(e.loaded, e.total);\n\t                }, false);\n\t                // ¿ªÊ¼ÉÏ´«\n\t                var data = new FormData();\n\t                for (var item in _this.props.data.requestValue) {\n\t                    data.append(item, _this.props.data.requestValue[item]);\n\t                }\n\t                data.append('file', file);\n\t                data.append('name', file.name);\n\t                data.append('type', file.type);\n\t                data.append('lastModifiedDate', file.lastModifiedDate);\n\t                data.append('size', file.size);\n\t                xhr.open(\"POST\", '/cgi-bin/mmemoticonmgr-bin/uploadmedia', true);\n\t                xhr.send(data);\n\t                // ÎÄ¼þÉÏ´«³É¹¦»òÊÇÊ§°Ü\n\t                xhr.onreadystatechange = function (e) {\n\t                    if (xhr.readyState == 4) {\n\t                        if (xhr.status == 200) {\n\t                            _this.response(JSON.parse(xhr.response), 'suc');\n\t                        }\n\t                    }\n\t                };\n\t            }\n\t        })(file, this);\n\t    },\n\t    //鼠标事件\n\t    handleMouseoverPick: function handleMouseoverPick() {\n\t\n\t        console.log('handleMouseoverPick');\n\t        this.setState({\n\t            isHover: 1\n\t        });\n\t    },\n\t    handleMouseleavePick: function handleMouseleavePick() {\n\t        console.log('handleMouseleavePick');\n\t        this.setState({\n\t            isHover: 0\n\t        });\n\t    },\n\t    //drap事件\n\t    handleDragOver: function handleDragOver(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        console.log('handleDragOver');\n\t        this.setState({\n\t            isDragover: 1\n\t        });\n\t    },\n\t\n\t    handleDrop: function handleDrop(e) {\n\t        e.stopPropagation();\n\t        e.preventDefault();\n\t        this.setState({\n\t            isDragover: 0\n\t        });\n\t        var dt = e.dataTransfer;\n\t        var files = dt.files;\n\t        console.log(JSON.stringify(dt));\n\t        this.showPreview(files[files.length - 1]);\n\t\n\t        var fileStatus = this.checkPattern(files[files.length - 1]);\n\t        if (fileStatus.isPass) {\n\t            //·ûºÏ¸ñÊ½\n\t\n\t            this.upload(files[files.length - 1]);\n\t            files[files.length - 1] = false;\n\t        } else {\n\t            //²»·ûºÏ¸ñÊ½\n\t            this.response(null, fileStatus.status);\n\t        }\n\t        return false;\n\t    },\n\t    checkPattern: function checkPattern(file) {\n\t        var fileType = file.type,\n\t            response = {};\n\t\n\t        if (file.name.substring(file.name.length - 3, file.name.length) == this.props.data.setting.reg.format) {\n\t            //符合格式\n\t            if (this.props.data.setting.reg.size) {\n\t                if (this.props.data.setting.reg.size > file.size) {\n\t                    //符合大小\n\t                    response.isPass = true;\n\t                } else {\n\t                    //不符合大小\n\t                    response.isPass = false;\n\t                    response.status = 'oversized';\n\t                    this.setState({\n\t                        status: response.status\n\t                    });\n\t                }\n\t            } else {\n\t                response.isPass = true;\n\t            }\n\t        } else {\n\t            response.isPass = false;\n\t            response.status = 'format error';\n\t            this.setState({\n\t                status: response.status\n\t            });\n\t        }\n\t        return response;\n\t    },\n\t    response: function response(d, status, name) {\n\t        this.setState({\n\t            load: {\n\t                show: 0\n\t            }\n\t        });\n\t        var data = {\n\t            name: name,\n\t            id: this.props.data.setting.id,\n\t            status: status,\n\t            value: d\n\t        };\n\t        this.props.data.handle(data);\n\t    },\n\t    showPreview: function showPreview(file) {\n\t        var reader = new FileReader();\n\t        reader.readAsDataURL(file);\n\t        reader.onload = function (e) {\n\t            this.setState({\n\t                preview: file.name\n\t            });\n\t        }.bind(this);\n\t    }\n\t}, _defineProperty(_React$createClass, 'upload', function upload(file) {\n\t    (function (file, _this) {\n\t        var xhr = new XMLHttpRequest(),\n\t            reader = new FileReader();\n\t        if (xhr.upload) {\n\t            // ÉÏ´«ÖÐ\n\t            xhr.upload.addEventListener(\"progress\", function (e) {\n\t                _this.uploading(e.loaded, e.total);\n\t            }, false);\n\t            // ¿ªÊ¼ÉÏ´«\n\t            var data = new FormData();\n\t            for (var item in _this.props.data.setting.request.data) {\n\t                data.append(item, _this.props.data.setting.request.data[item]);\n\t            }\n\t            data.append('file', file);\n\t            data.append('name', file.name);\n\t            data.append('type', file.type);\n\t            data.append('lastModifiedDate', file.lastModifiedDate);\n\t            data.append('size', file.size);\n\t            xhr.open(\"POST\", '/cgi-bin/mmemoticonmgr-bin/uploadmedia', true);\n\t            xhr.send(data);\n\t            // ÎÄ¼þÉÏ´«³É¹¦»òÊÇÊ§°Ü\n\t            xhr.onreadystatechange = function (e) {\n\t                if (xhr.readyState == 4) {\n\t                    if (xhr.status == 200) {\n\t                        switch (JSON.parse(xhr.response).base_resp.ret) {\n\t                            case 0:\n\t                                _this.setState({\n\t                                    status: 'suc'\n\t                                });\n\t                                _this.response(JSON.parse(xhr.response), 'suc', file.name);\n\t                                break;\n\t\n\t                            default:\n\t                                _this.setState({\n\t                                    status: 'system error'\n\t                                });\n\t                                _this.response(JSON.parse(xhr.response), 'system error', file.name);\n\t                                break;\n\t                        }\n\t                    }\n\t                } else {\n\t                    _this.response('', 'system error', file.name);\n\t                }\n\t            };\n\t        }\n\t    })(file, this);\n\t}), _defineProperty(_React$createClass, 'handleDragLeave', function handleDragLeave(e) {\n\t    e.stopPropagation();\n\t    e.preventDefault();\n\t    console.log('handleDragLeave');\n\t    this.setState({\n\t        isDragover: 0\n\t    });\n\t}), _defineProperty(_React$createClass, 'handleClickDele', function handleClickDele(e) {\n\t    e.stopPropagation();\n\t    e.preventDefault();\n\t    var data = {\n\t        id: this.props.data.setting.id,\n\t        status: 'dele',\n\t        value: null\n\t    };\n\t    this.props.data.handle(data);\n\t    this.setState({\n\t        preview: null\n\t    });\n\t}), _defineProperty(_React$createClass, 'componentWillMount', function componentWillMount() {\n\t    console.log('single componentWillMount');\n\t}), _defineProperty(_React$createClass, 'render', function render() {\n\t    var classArea = this.props.data.setting.classname ? 'filePickArea ' + this.props.data.setting.classname : 'filePickArea',\n\t        loadStyle = {\n\t        width: this.state.load.progress * 100 + '%'\n\t    },\n\t        uploaderBtnContent = React.createElement(\n\t        'div',\n\t        { className: 'filePickUploader_btn' },\n\t        React.createElement('div', { className: 'ic' }),\n\t        React.createElement(\n\t            'div',\n\t            { className: 'text' },\n\t            '\\u70B9\\u51FB\\u6216\\u62D6\\u62FD\\u4E0A\\u4F20'\n\t        )\n\t    ),\n\t        errMsg = '';\n\t    /*filePickDeleArea = (this.props.data.isNeedDele && this.state.img && this.state.isHover == 1) ? <div className=\"filePickDeleArea\">\r\n\t            <a href=\"javascript:;\" className=\"btn btn_warn\" onClick={this.handleClickDele}>删除</a>\r\n\t        </div> : null,\r\n\t    filePickLoadArea = this.state.load.show == 1 ? <div className=\"filePickLoadArea\">\r\n\t            <div className=\"loadBar\">\r\n\t                <div className=\"loadContent\" style={loadStyle}></div>\r\n\t            </div>\r\n\t        </div> : null;*/\n\t\n\t    switch (this.state.status) {\n\t        case 'format error':\n\t            errMsg = '文件格式不正确';\n\t            break;\n\t\n\t        case 'oversized':\n\t            errMsg = '文件超过大小';\n\t            break;\n\t\n\t        case 'system error':\n\t            errMsg = '系统错误';\n\t            break;\n\t    }\n\t    classArea = this.state.isHover ? classArea + ' hover' : classArea;\n\t    uploaderBtnContent = this.state.load.show ? React.createElement(\n\t        'div',\n\t        { className: 'filePickLoadArea' },\n\t        React.createElement(\n\t            'div',\n\t            { className: 'loadBar' },\n\t            React.createElement('div', { className: 'loadContent', style: loadStyle })\n\t        )\n\t    ) : this.state.isDragover ? React.createElement(\n\t        'div',\n\t        { className: 'filePickUploader_btn dragOver' },\n\t        '\\u91CA\\u653E\\u9F20\\u6807'\n\t    ) : uploaderBtnContent;\n\t    return React.createElement(\n\t        'div',\n\t        { className: 'fileUploaderGroup' },\n\t        this.props.data.setting.label ? React.createElement(\n\t            'label',\n\t            { className: 'frm_label' },\n\t            this.props.data.setting.label\n\t        ) : null,\n\t        React.createElement(\n\t            'div',\n\t            { className: classArea, onMouseOver: this.handleMouseoverPick, onMouseLeave: this.handleMouseleavePick, onDragLeave: this.handleDragLeave, onClick: this.handleClick, onDragOver: this.handleDragOver, onDrop: this.handleDrop },\n\t            React.createElement(\n\t                'div',\n\t                { className: 'filePick' },\n\t                React.createElement('input', { ref: 'filePickInput', onChange: this.handleChange, className: 'filePickUploader_input', type: 'file' }),\n\t                uploaderBtnContent\n\t            ),\n\t            this.state.preview ? React.createElement(\n\t                'div',\n\t                { className: 'previewContainer' },\n\t                this.state.status != 'suc' || !this.state.status ? React.createElement('i', { className: 'ic_err' }) : null,\n\t                this.state.preview,\n\t                React.createElement(\n\t                    'span',\n\t                    { className: 'errMsg' },\n\t                    errMsg\n\t                ),\n\t                React.createElement(\n\t                    'a',\n\t                    { className: 'link_dele', href: 'javascript:;', onClick: this.handleClickDele },\n\t                    '\\u5220\\u9664'\n\t                )\n\t            ) : null\n\t        )\n\t    );\n\t}), _React$createClass));\n\t\n\tvar Inner = React.createClass({\n\t    displayName: 'Inner',\n\t\n\t    getInitialState: function getInitialState() {\n\t        var _setting;\n\t\n\t        return {\n\t            isOpen: {\n\t                ImagePick: false,\n\t                SingleFilePick: false\n\t            },\n\t            ImagePick1ImagePick: {\n\t                setting: {\n\t                    id: 'ImagePick',\n\t                    classname: 'imagepickerClassName',\n\t                    label: '我是ImagePicker的label',\n\t                    text: {\n\t                        normal: '点击上传',\n\t                        hover: '释放鼠标'\n\t                    },\n\t                    reg: {\n\t                        format: 'png',\n\t                        size: 1024 * 1024\n\t                    },\n\t                    request: { //请求\n\t                        url: '/cgi-bin/mmemoticonmgr-bin/uploadmedia',\n\t                        data: {\n\t                            mediaType: 123,\n\t                            mediaType2: 223,\n\t                            mediaType3: 323\n\t                        }\n\t                    }\n\t                },\n\t                value: null,\n\t                preview: '',\n\t                handle: this.handle\n\t            },\n\t            ImagePick: {\n\t                extendClass: 'imagePickExtendClass tc', //Ñ¡Ìî£¬string£¬À©Õ¹class\n\t                img: 'https://sticker.weixin.qq.com/htdocs/zh_CN/images/index/home_item127602b.png', //有需要预览的时候才加\n\t                reg: {\n\t                    format: 'png', //±ØÌî£¬string£¬ÏÞÖÆµÄÍ¼Æ¬¸ñÊ½\n\t                    size: 12 * 1024 //Ñ¡Ìî£¬int£¬ÏÞÖÆÍ¼Æ¬µÄ´óÐ¡\n\t                },\n\t                text: {\n\t                    dragover: '松开鼠标' //Ñ¡Ìî£¬string£¬Êó±êÍÏÍ¼Æ¬µ½×é¼þÊ±ºòµÄwording\n\t                },\n\t                isNeedDele: true, //Ñ¡Ìî£¬boolean£¬ÊÇ·ñÐèÒªÉ¾³ý²Ù×÷\n\t                request: '/cgi-bin/mmemoticonmgr-bin/uploadmedia', //±ØÌî£¬string£¬Í¼Æ¬ÉÏ´«cgi\n\t                requestValue: { //Ñ¡Ìî£¬object£¬postÒª´øµÄ×Ö¶Î\n\t                    mediaType: 123,\n\t                    mediaType2: 223,\n\t                    mediaType3: 323\n\t                },\n\t                responseValue: { //Ñ¡Ìî£¬object£¬Òª´ø»ØÀ´µÄÖµ\n\t                    id: 'ImagePick',\n\t                    v: '带回来啦'\n\t                },\n\t                handle: this.handleImageChange //±ØÌî£¬object£¬Í¼Æ¬ÉÏ´«·µ»Ø´¥·¢µÄÊÂ¼þ£¬·µ»Øid¡¢cgi·µ»ØÖµ\n\t            },\n\t            SingleFilePick: {\n\t                setting: (_setting = {\n\t                    label: '我是SingleFilePick的label',\n\t                    id: 'SingleFilePick',\n\t                    classname: 'singlePickerClassName'\n\t                }, _defineProperty(_setting, 'label', '我是单文件上传的label'), _defineProperty(_setting, 'reg', { //限制条件\n\t                    format: 'zip', //文件格式\n\t                    size: 1024 * 1024 * 1024 * 1024 //文件大小\n\t                }), _defineProperty(_setting, 'request', { //请求\n\t                    url: '/cgi-bin/mmemoticonmgr-bin/uploadmedia',\n\t                    data: {\n\t                        mediaType: 123,\n\t                        mediaType2: 223,\n\t                        mediaType3: 323\n\t                    }\n\t                }), _setting),\n\t                handle: this.handleFile,\n\t                value: null,\n\t                preview: '' //预览的内容\n\t            },\n\t            result: {\n\t                ImagePick: '',\n\t                SingleFilePick: ''\n\t            }\n\t        };\n\t    },\n\t    //文件上传handle\n\t    handleFile: function handleFile(v) {\n\t        var stateResult = this.state.result;\n\t        stateResult[v.id] = JSON.stringify(v);\n\t        this.setState({\n\t            result: stateResult\n\t        });\n\t    },\n\t    handleImageChange: function handleImageChange(v) {\n\t        var stateResult = this.state.result;\n\t        stateResult[v.index.id] = JSON.stringify(v);\n\t        this.setState({\n\t            result: stateResult\n\t        });\n\t    },\n\t    handleClickOpenSetting: function handleClickOpenSetting(index, e) {\n\t        var stateIsopen = this.state.isOpen;\n\t        stateIsopen[index] = !stateIsopen[index];\n\t\n\t        this.setState({\n\t            isOpen: stateIsopen\n\t        });\n\t    },\n\t    render: function render() {\n\t        var settingImagePick = JSON.stringify(this.state.ImagePick, null, '\\t'),\n\t            settingSingleFilePick = JSON.stringify(this.state.SingleFilePick, null, '\\t');\n\t        return React.createElement(\n\t            'div',\n\t            { className: 'inner' },\n\t            React.createElement(\n\t                'h3',\n\t                { className: this.state.isOpen.ImagePick ? 'title_Widget open' : 'title_Widget close', onClick: this.handleClickOpenSetting.bind(this, 'ImagePick') },\n\t                'fileUploader.ImagePick'\n\t            ),\n\t            this.state.isOpen.ImagePick ? React.createElement(\n\t                'pre',\n\t                { className: 'setting' },\n\t                settingImagePick\n\t            ) : null,\n\t            React.createElement(ImagePick, { data: this.state.ImagePick }),\n\t            React.createElement(\n\t                'p',\n\t                { className: 'result' },\n\t                '\\u7ED3\\u679C\\u662F\\uFF1A',\n\t                React.createElement('br', null),\n\t                this.state.result.ImagePick\n\t            ),\n\t            React.createElement('br', null),\n\t            React.createElement('br', null),\n\t            React.createElement('br', null),\n\t            React.createElement(\n\t                'h3',\n\t                { className: this.state.isOpen.SingleFilePick ? 'title_Widget open' : 'title_Widget close', onClick: this.handleClickOpenSetting.bind(this, 'SingleFilePick') },\n\t                'fileUploader.SingleFilePick'\n\t            ),\n\t            this.state.isOpen.SingleFilePick ? React.createElement(\n\t                'pre',\n\t                { className: 'setting' },\n\t                settingSingleFilePick\n\t            ) : null,\n\t            React.createElement(SingleFilePick, { data: this.state.SingleFilePick }),\n\t            React.createElement(\n\t                'p',\n\t                { className: 'result' },\n\t                '\\u7ED3\\u679C\\u662F\\uFF1A',\n\t                React.createElement('br', null),\n\t                this.state.result.SingleFilePick\n\t            ),\n\t            React.createElement('br', null),\n\t            React.createElement('br', null),\n\t            React.createElement('br', null)\n\t        );\n\t    }\n\t});\n\t\n\tReact.render(React.createElement(Inner, null), document.getElementById('inner'));\n\t\n\texports.ImagePick = ImagePick;\n\texports.SingleFilePick = SingleFilePick;\n\texports.Inner = Inner;\n\n/***/ },\n\n/***/ 14:\n/***/ function(module, exports) {\n\n\t// removed by extract-text-webpack-plugin\n\n/***/ }\n\n/******/ });\n\n\n// WEBPACK FOOTER //\n// widgets/fileUploader/index.6fb9.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 6fb9adce7f75dc4968ab","import './index.less';\r\n\r\nvar ImagePick = React.createClass({\r\n    getInitialState: function(){\r\n        return ({\r\n            img: this.props.data.img,\r\n            load: {\r\n                show: 0,\r\n                progress: 0\r\n            },\r\n\r\n            isDragover: 0,\r\n            isHover: 0\r\n        })\r\n    },\r\n    handleClick: function(){\r\n        this.refs.imagePickInput.getDOMNode().click();\r\n    },\r\n    //µã»÷ÉÏ´«\r\n    handleChange: function(e){\r\n        var fileList = e.target.files;\r\n        this.showPreview(fileList[0]);\r\n\r\n        var fileStatus = this.checkPattern(fileList[0]);\r\n        if(fileStatus.isPass){//·ûºÏ¸ñÊ½\r\n            this.upload(fileList[0]);\r\n        }else{//²»·ûºÏ¸ñÊ½\r\n            this.response(null, fileStatus.status);\r\n        }\r\n\r\n    },\r\n    //Õ¹Ê¾Ô¤ÀÀÍ¼\r\n    showPreview: function(file){\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function(e){\r\n            this.setState({\r\n                img: reader.result\r\n            });\r\n        }.bind(this)\r\n    },\r\n    //ÍÏµ½ÉÏÃæ\r\n    handleDragOver: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this.setState({\r\n            isDragover: 1\r\n        });\r\n    },\r\n    //ÒÑ¾­¶ª½øÈ¥\r\n    handleDrop: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this.setState({\r\n            isDragover: 0\r\n        });\r\n        var dt = e.dataTransfer;\r\n        var files = dt.files;\r\n        console.log(JSON.stringify(dt));\r\n        this.showPreview(files[files.length - 1]);\r\n\r\n        var fileStatus = this.checkPattern(files[files.length - 1]);\r\n        if(fileStatus.isPass){//·ûºÏ¸ñÊ½\r\n\r\n            this.upload(files[files.length - 1]);\r\n            files[files.length - 1] = false;\r\n        }else{//²»·ûºÏ¸ñÊ½\r\n            this.response(null, fileStatus.status);\r\n        }\r\n        return false;\r\n    },\r\n    //¼ì²éÎÄ¼þ¸ñÊ½\r\n    checkPattern: function(file){\r\n        var fileType = file.type,\r\n                response = {};\r\n        if(fileType.indexOf('image/') >= 0){//ÊÇÍ¼Æ¬\r\n            fileType = fileType.replace('image/', '');\r\n            if(this.props.data.reg.format.indexOf(fileType) >= 0){//·ûºÏÍ¼Æ¬¸ñÊ½\r\n                if(this.props.data.reg.size){//ÓÐ´óÐ¡ÏÞÖÆ\r\n                    if(this.props.data.reg.size >= file.size){\r\n                        response.isPass = true;\r\n                    }else{\r\n                        response.isPass = false;\r\n                        response.status = 'oversized';\r\n                    }\r\n                }else{//Ã»ÓÐ´óÐ¡ÏÞÖÆ\r\n                    response.isPass = true;\r\n                }\r\n            }else{//²»·ûºÏÍ¼Æ¬¸ñÊ½\r\n                response.isPass = false;\r\n                response.status = 'format error';\r\n            }\r\n        }else{//²»ÊÇÍ¼Æ¬ ¸ñÊ½´íÎó\r\n            response.isPass = false;\r\n            response.status = 'format error';\r\n        }\r\n        return response;\r\n    },\r\n    //ÍÏ×§Àë¿ª\r\n    handleDragLeave: function(e){\r\n        this.setState({\r\n            isDragover: 0\r\n        });\r\n    },\r\n    //ÉÏ´«ÖÐ\r\n    uploading: function(loaded, total){\r\n\r\n        this.setState({\r\n            load: {\r\n                show: 1,\r\n                progress: loaded / total\r\n            }\r\n        })\r\n    },\r\n    //²»¹Ü³É¹¦Ê§°Ü£¬ÕâÀïÅ×ÊÂ¼þ\r\n    response: function(d, status){\r\n        this.setState({\r\n            load: {\r\n                show: 0\r\n            }\r\n        });\r\n        var data = {\r\n            index: this.props.data.responseValue,\r\n            status: status,\r\n            value: d\r\n        };\r\n        this.props.data.handle(data);\r\n    },\r\n    //ÉÏ´«Í¼Æ¬µ½·þÎñÆ÷\r\n    upload: function(file){\r\n        (function(file, _this){\r\n            var xhr = new XMLHttpRequest(),\r\n                    reader = new FileReader();\r\n            if (xhr.upload) {\r\n                // ÉÏ´«ÖÐ\r\n                xhr.upload.addEventListener(\"progress\", function(e) {\r\n                    _this.uploading(e.loaded, e.total);\r\n                }, false);\r\n                // ¿ªÊ¼ÉÏ´«\r\n                var data = new FormData();\r\n                for(var item in _this.props.data.requestValue){\r\n                    data.append(item, _this.props.data.requestValue[item]);\r\n                }\r\n                data.append('file', file);\r\n                data.append('name', file.name);\r\n                data.append('type', file.type);\r\n                data.append('lastModifiedDate', file.lastModifiedDate);\r\n                data.append('size', file.size);\r\n                xhr.open(\"POST\", '/cgi-bin/mmemoticonmgr-bin/uploadmedia', true);\r\n                xhr.send(data);\r\n                // ÎÄ¼þÉÏ´«³É¹¦»òÊÇÊ§°Ü\r\n                xhr.onreadystatechange = function(e) {\r\n                    if (xhr.readyState == 4) {\r\n                        if (xhr.status == 200) {\r\n                            _this.response(JSON.parse(xhr.response), 'suc');\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n        }(file, this))\r\n    },\r\n    //Êó±êÔÚ×é¼þÉÏ\r\n    handleMouseoverPick: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        if(this.state.isHover != 1){\r\n            this.setState({\r\n                isHover: 1\r\n            });\r\n        }\r\n\r\n    },\r\n    //Êó±êÀë¿ª\r\n    handleMouseleavePick: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this.setState({\r\n            isHover: 0\r\n        });\r\n    },\r\n    //É¾³ýÊÂ¼þ\r\n    handleClickDele: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        var data = {\r\n            index: this.props.data.responseValue,\r\n            status: 'dele',\r\n            value: null\r\n        };\r\n        this.props.data.handle(data);\r\n        this.setState({\r\n            preview: null\r\n        });\r\n    },\r\n    render: function(){\r\n        var classArea = 'imagePickArea ' + this.props.data.extendClass,\r\n                contentPickBtn = '+',\r\n                loadStyle = {\r\n                    width: this.state.load.progress * 100 + '%'\r\n                },\r\n                imagePickLoadArea = this.state.load.show == 1 ? <div className=\"imagePickLoadArea\">\r\n                    <div className=\"loadBar\">\r\n                        <div className=\"loadContent\" style={loadStyle}></div>\r\n                    </div>\r\n                </div> : null,\r\n        //ÊÇ·ñÐèÒªÉ¾³ý\r\n                imagePickDeleArea = (this.props.data.isNeedDele && this.state.img && this.state.isHover == 1) ? <div className=\"imagePickDeleArea\">\r\n                    <a href=\"javascript:;\" className=\"btn btn_warn\" onClick={this.handleClickDele}>删除</a>\r\n                </div> : null;\r\n\r\n        this.state.isHover==1? classArea += ' hover':null;\r\n        if(this.state.isDragover==1){\r\n            classArea += ' dragover';\r\n            this.props.data.text.dragover ? contentPickBtn = this.props.data.text.dragover : null;\r\n        }\r\n        /*mouseover mouseleave·ÅÔÚ imagePick ÕâÒ»²ã»áÒ»Ö±´¥·¢*/\r\n        return (\r\n                <div className={classArea} onMouseOver={this.handleMouseoverPick} onMouseLeave={this.handleMouseleavePick} onDragLeave={this.handleDragLeave} onClick={this.handleClick} onDragOver={this.handleDragOver} onDrop={this.handleDrop}>\r\n                    <div className='imagePick'>\r\n                        <input ref=\"imagePickInput\" onChange={this.handleChange} className=\"imagePickUploader_input\" type=\"file\" />\r\n                        <div className=\"imagePickUploader_btn\">{contentPickBtn}</div>\r\n                        {this.state.img? <img className=\"imagePickUploader_preview\" ref=\"imagePickUploader_preview\" src={this.state.img} /> : null}\r\n                    </div>\r\n                    {imagePickDeleArea}\r\n                    {imagePickLoadArea}\r\n                </div>\r\n        )\r\n\r\n    }\r\n});\r\n\r\n//单文件上传\r\nvar SingleFilePick = React.createClass({\r\n    getInitialState: function(){\r\n        console.log('SingleFilePick getInitialState');\r\n        return ({\r\n            preview: this.props.data.preview,\r\n            load: {\r\n                show: 0,\r\n                progress: 0\r\n            },\r\n            status: '',\r\n            isDragover: 0,\r\n            isHover: 0\r\n        })\r\n    },\r\n    uploading: function(loaded, total){\r\n        console.log('uploading');\r\n        this.setState({\r\n            load: {\r\n                show: 1,\r\n                progress: loaded / total\r\n            }\r\n        })\r\n    },\r\n     upload: function(file){\r\n        console.log('upload');\r\n        (function(file, _this){\r\n            var xhr = new XMLHttpRequest(),\r\n                    reader = new FileReader();\r\n            if (xhr.upload) {\r\n                // ÉÏ´«ÖÐ\r\n                xhr.upload.addEventListener(\"progress\", function(e) {\r\n                    _this.uploading(e.loaded, e.total);\r\n                }, false);\r\n                // ¿ªÊ¼ÉÏ´«\r\n                var data = new FormData();\r\n                for(var item in _this.props.data.requestValue){\r\n                    data.append(item, _this.props.data.requestValue[item]);\r\n                }\r\n                data.append('file', file);\r\n                data.append('name', file.name);\r\n                data.append('type', file.type);\r\n                data.append('lastModifiedDate', file.lastModifiedDate);\r\n                data.append('size', file.size);\r\n                xhr.open(\"POST\", '/cgi-bin/mmemoticonmgr-bin/uploadmedia', true);\r\n                xhr.send(data);\r\n                // ÎÄ¼þÉÏ´«³É¹¦»òÊÇÊ§°Ü\r\n                xhr.onreadystatechange = function(e) {\r\n                    if (xhr.readyState == 4) {\r\n                        if (xhr.status == 200) {\r\n                            _this.response(JSON.parse(xhr.response), 'suc');\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n        }(file, this))\r\n    },\r\n    //鼠标事件\r\n    handleMouseoverPick: function(){\r\n\r\n        console.log('handleMouseoverPick');\r\n        this.setState({\r\n            isHover: 1\r\n        });\r\n    },\r\n    handleMouseleavePick: function(){\r\n        console.log('handleMouseleavePick');\r\n        this.setState({\r\n            isHover: 0\r\n        });\r\n    },\r\n    //drap事件\r\n    handleDragOver: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        console.log('handleDragOver');\r\n        this.setState({\r\n            isDragover: 1\r\n        });\r\n    },\r\n\r\n    handleDrop: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        this.setState({\r\n            isDragover: 0\r\n        });\r\n        var dt = e.dataTransfer;\r\n        var files = dt.files;\r\n        console.log(JSON.stringify(dt));\r\n        this.showPreview(files[files.length - 1]);\r\n\r\n        var fileStatus = this.checkPattern(files[files.length - 1]);\r\n        if(fileStatus.isPass){//·ûºÏ¸ñÊ½\r\n\r\n            this.upload(files[files.length - 1]);\r\n            files[files.length - 1] = false;\r\n        }else{//²»·ûºÏ¸ñÊ½\r\n            this.response(null, fileStatus.status);\r\n        }\r\n        return false;\r\n    },\r\n    checkPattern: function(file){\r\n        var fileType = file.type,\r\n                response = {};\r\n        \r\n        if(file.name.substring(file.name.length-3, file.name.length) == this.props.data.setting.reg.format){//符合格式\r\n            if(this.props.data.setting.reg.size){\r\n                if(this.props.data.setting.reg.size > file.size){//符合大小\r\n                    response.isPass = true;\r\n                }else{//不符合大小\r\n                    response.isPass = false;\r\n                    response.status = 'oversized';\r\n                    this.setState({\r\n                        status: response.status\r\n                    });\r\n                }   \r\n            }else{\r\n                response.isPass = true;\r\n            }\r\n        }else{\r\n            response.isPass = false;\r\n            response.status = 'format error';\r\n            this.setState({\r\n                status: response.status\r\n            });\r\n        }\r\n        return response;\r\n\r\n    },\r\n    response: function(d, status, name){\r\n        this.setState({\r\n            load: {\r\n                show: 0\r\n            }\r\n        });\r\n        var data = {\r\n            name: name,\r\n            id: this.props.data.setting.id,\r\n            status: status,\r\n            value: d\r\n        };\r\n        this.props.data.handle(data);\r\n    },\r\n    showPreview: function(file){\r\n        var reader = new FileReader();\r\n        reader.readAsDataURL(file);\r\n        reader.onload = function(e){\r\n            this.setState({\r\n                preview: file.name\r\n            });\r\n        }.bind(this)\r\n    },\r\n    upload: function(file){\r\n        (function(file, _this){\r\n            var xhr = new XMLHttpRequest(),\r\n                    reader = new FileReader();\r\n            if (xhr.upload) {\r\n                // ÉÏ´«ÖÐ\r\n                xhr.upload.addEventListener(\"progress\", function(e) {\r\n                    _this.uploading(e.loaded, e.total);\r\n                }, false);\r\n                // ¿ªÊ¼ÉÏ´«\r\n                var data = new FormData();\r\n                for(var item in _this.props.data.setting.request.data){\r\n                    data.append(item, _this.props.data.setting.request.data[item]);\r\n                }\r\n                data.append('file', file);\r\n                data.append('name', file.name);\r\n                data.append('type', file.type);\r\n                data.append('lastModifiedDate', file.lastModifiedDate);\r\n                data.append('size', file.size);\r\n                xhr.open(\"POST\", '/cgi-bin/mmemoticonmgr-bin/uploadmedia', true);\r\n                xhr.send(data);\r\n                // ÎÄ¼þÉÏ´«³É¹¦»òÊÇÊ§°Ü\r\n                xhr.onreadystatechange = function(e) {\r\n                    if (xhr.readyState == 4) {\r\n                        if (xhr.status == 200) {\r\n                            switch(JSON.parse(xhr.response).base_resp.ret){\r\n                                case 0:\r\n                                    _this.setState({\r\n                                        status: 'suc'\r\n                                    });\r\n                                    _this.response(JSON.parse(xhr.response), 'suc', file.name);\r\n                                    break;\r\n\r\n                                default:\r\n                                    _this.setState({\r\n                                        status: 'system error'\r\n                                    });\r\n                                    _this.response(JSON.parse(xhr.response), 'system error', file.name);\r\n                                    break;\r\n                            }\r\n                            \r\n                        }\r\n                    }else {\r\n                        _this.response('', 'system error', file.name);\r\n                    }\r\n                };\r\n            }\r\n        }(file, this))\r\n    },\r\n    handleDragLeave: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        console.log('handleDragLeave');\r\n        this.setState({\r\n            isDragover: 0\r\n        });\r\n    },\r\n    //删除\r\n    handleClickDele: function(e){\r\n        e.stopPropagation();\r\n        e.preventDefault();\r\n        var data = {\r\n            id: this.props.data.setting.id,\r\n            status: 'dele',\r\n            value: null\r\n        };\r\n        this.props.data.handle(data);\r\n        this.setState({\r\n            preview: null\r\n        });\r\n    },\r\n    componentWillMount: function(){\r\n        console.log('single componentWillMount');\r\n    },\r\n    render: function(){\r\n        var classArea = this.props.data.setting.classname ? 'filePickArea ' + this.props.data.setting.classname : 'filePickArea',\r\n            loadStyle = {\r\n                width: this.state.load.progress * 100 + '%'\r\n            },\r\n            uploaderBtnContent = <div className=\"filePickUploader_btn\">\r\n                <div className=\"ic\"></div>\r\n                <div className=\"text\">点击或拖拽上传</div>\r\n            </div>,\r\n            errMsg = '';\r\n            /*filePickDeleArea = (this.props.data.isNeedDele && this.state.img && this.state.isHover == 1) ? <div className=\"filePickDeleArea\">\r\n                    <a href=\"javascript:;\" className=\"btn btn_warn\" onClick={this.handleClickDele}>删除</a>\r\n                </div> : null,\r\n            filePickLoadArea = this.state.load.show == 1 ? <div className=\"filePickLoadArea\">\r\n                    <div className=\"loadBar\">\r\n                        <div className=\"loadContent\" style={loadStyle}></div>\r\n                    </div>\r\n                </div> : null;*/\r\n\r\n        switch(this.state.status){\r\n            case 'format error':\r\n                errMsg = '文件格式不正确';\r\n                break;\r\n\r\n            case 'oversized':\r\n                errMsg = '文件超过大小';\r\n                break;\r\n\r\n            case 'system error':\r\n                errMsg = '系统错误';\r\n                break;\r\n        }\r\n        classArea = this.state.isHover ? classArea + ' hover' : classArea;\r\n        uploaderBtnContent = this.state.load.show ? <div className=\"filePickLoadArea\">\r\n                    <div className=\"loadBar\">\r\n                        <div className=\"loadContent\" style={loadStyle}></div>\r\n                    </div>\r\n                </div> : this.state.isDragover ? <div className=\"filePickUploader_btn dragOver\">\r\n                    释放鼠标\r\n                </div> : uploaderBtnContent;\r\n        return (\r\n            <div className=\"fileUploaderGroup\">\r\n                {this.props.data.setting.label ? <label className=\"frm_label\">{this.props.data.setting.label}</label>:null}\r\n                <div className={classArea} onMouseOver={this.handleMouseoverPick} onMouseLeave={this.handleMouseleavePick} onDragLeave={this.handleDragLeave} onClick={this.handleClick} onDragOver={this.handleDragOver} onDrop={this.handleDrop}>\r\n                    <div className='filePick'>\r\n                        <input ref=\"filePickInput\" onChange={this.handleChange} className=\"filePickUploader_input\" type=\"file\" />\r\n                        {uploaderBtnContent}\r\n\r\n                    </div>\r\n                    {this.state.preview ? <div className=\"previewContainer\">\r\n                            {this.state.status != 'suc' || !this.state.status ? <i className=\"ic_err\"></i> : null}\r\n                            {this.state.preview}\r\n                            <span className=\"errMsg\">{errMsg}</span>\r\n                            <a className=\"link_dele\" href=\"javascript:;\" onClick={this.handleClickDele}>删除</a>\r\n                        </div> : null}\r\n                </div>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n});\r\n\r\nvar Inner = React.createClass({\r\n    getInitialState: function(){\r\n        return ({\r\n            isOpen: {\r\n                ImagePick: false,\r\n                SingleFilePick: false\r\n            },\r\n            ImagePick1ImagePick: {\r\n                setting: {\r\n                    id: 'ImagePick',\r\n                    classname: 'imagepickerClassName',\r\n                    label: '我是ImagePicker的label',\r\n                    text: {\r\n                        normal: '点击上传',\r\n                        hover: '释放鼠标'\r\n                    },\r\n                    reg: {\r\n                        format: 'png',\r\n                        size: 1024 * 1024,\r\n                    },\r\n                    request: {//请求\r\n                        url: '/cgi-bin/mmemoticonmgr-bin/uploadmedia',\r\n                        data: {\r\n                            mediaType: 123,\r\n                            mediaType2: 223,\r\n                            mediaType3: 323\r\n                        }\r\n                    }\r\n                },\r\n                value: null,\r\n                preview: '',\r\n                handle: this.handle\r\n            },\r\n            ImagePick: {\r\n                extendClass: 'imagePickExtendClass tc',//Ñ¡Ìî£¬string£¬À©Õ¹class\r\n                img: 'https://sticker.weixin.qq.com/htdocs/zh_CN/images/index/home_item127602b.png',//有需要预览的时候才加\r\n                reg: {\r\n                    format: 'png',//±ØÌî£¬string£¬ÏÞÖÆµÄÍ¼Æ¬¸ñÊ½\r\n                    size: 12 * 1024//Ñ¡Ìî£¬int£¬ÏÞÖÆÍ¼Æ¬µÄ´óÐ¡\r\n                },\r\n                text: {\r\n                    dragover: '松开鼠标'//Ñ¡Ìî£¬string£¬Êó±êÍÏÍ¼Æ¬µ½×é¼þÊ±ºòµÄwording\r\n                },\r\n                isNeedDele: true,//Ñ¡Ìî£¬boolean£¬ÊÇ·ñÐèÒªÉ¾³ý²Ù×÷\r\n                request: '/cgi-bin/mmemoticonmgr-bin/uploadmedia',//±ØÌî£¬string£¬Í¼Æ¬ÉÏ´«cgi\r\n                requestValue: {//Ñ¡Ìî£¬object£¬postÒª´øµÄ×Ö¶Î\r\n                    mediaType: 123,\r\n                    mediaType2: 223,\r\n                    mediaType3: 323\r\n                },\r\n                responseValue: {//Ñ¡Ìî£¬object£¬Òª´ø»ØÀ´µÄÖµ\r\n                    id: 'ImagePick',\r\n                    v: '带回来啦'\r\n                },\r\n                handle: this.handleImageChange//±ØÌî£¬object£¬Í¼Æ¬ÉÏ´«·µ»Ø´¥·¢µÄÊÂ¼þ£¬·µ»Øid¡¢cgi·µ»ØÖµ\r\n            },\r\n            SingleFilePick: {\r\n                setting: {\r\n                    label: '我是SingleFilePick的label',\r\n                    id: 'SingleFilePick',\r\n                    classname: 'singlePickerClassName',\r\n                    label: '我是单文件上传的label',\r\n                    reg: {//限制条件\r\n                        format: 'zip', //文件格式\r\n                        size: 1024 * 1024 * 1024 * 1024//文件大小\r\n                    },\r\n                    request: {//请求\r\n                        url: '/cgi-bin/mmemoticonmgr-bin/uploadmedia',\r\n                        data: {\r\n                            mediaType: 123,\r\n                            mediaType2: 223,\r\n                            mediaType3: 323\r\n                        }\r\n                    }\r\n                },\r\n                handle: this.handleFile,\r\n                value: null,\r\n                preview: ''//预览的内容\r\n            },\r\n            result: {\r\n                ImagePick: '',\r\n                SingleFilePick: ''\r\n            }\r\n        })\r\n    },\r\n    //文件上传handle\r\n    handleFile: function(v){\r\n        var stateResult = this.state.result;\r\n        stateResult[v.id] = JSON.stringify(v);\r\n        this.setState({\r\n            result: stateResult\r\n        });\r\n    },  \r\n    handleImageChange: function(v){\r\n        var stateResult = this.state.result;\r\n        stateResult[v.index.id] = JSON.stringify(v);\r\n        this.setState({\r\n            result: stateResult\r\n        });\r\n    },\r\n    handleClickOpenSetting: function(index, e){\r\n        var stateIsopen = this.state.isOpen;\r\n        stateIsopen[index] = !stateIsopen[index];\r\n        \r\n        this.setState({\r\n            isOpen: stateIsopen\r\n        });\r\n    },\r\n    render: function(){\r\n        var settingImagePick = JSON.stringify(this.state.ImagePick, null, '\\t'),\r\n            settingSingleFilePick = JSON.stringify(this.state.SingleFilePick, null, '\\t');\r\n        return (\r\n            <div className=\"inner\">\r\n                <h3 className={this.state.isOpen.ImagePick ? 'title_Widget open' : 'title_Widget close'} onClick={this.handleClickOpenSetting.bind(this, 'ImagePick')}>fileUploader.ImagePick</h3>\r\n                {this.state.isOpen.ImagePick ? <pre className=\"setting\">{settingImagePick}</pre> : null}\r\n                <ImagePick data={this.state.ImagePick} />\r\n                <p className=\"result\">\r\n                    结果是：\r\n                    <br />\r\n                    {this.state.result.ImagePick}\r\n                </p>\r\n                <br />\r\n                <br />\r\n                <br />\r\n\r\n                <h3 className={this.state.isOpen.SingleFilePick ? 'title_Widget open' : 'title_Widget close'} onClick={this.handleClickOpenSetting.bind(this, 'SingleFilePick')}>fileUploader.SingleFilePick</h3>\r\n                {this.state.isOpen.SingleFilePick ? <pre className=\"setting\">{settingSingleFilePick}</pre> : null}\r\n                <SingleFilePick data={this.state.SingleFilePick} />\r\n                <p className=\"result\">\r\n                    结果是：\r\n                    <br />\r\n                    {this.state.result.SingleFilePick}\r\n                </p>\r\n                <br />\r\n                <br />\r\n                <br />\r\n            </div>\r\n        )\r\n    }\r\n});\r\n\r\nReact.render(\r\n        <Inner />,\r\n        document.getElementById('inner')\r\n);\r\n\r\nexport {ImagePick, SingleFilePick, Inner};\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./F:/一些尝试/component/webpack_package/src/widgets/fileUploader/index.js"],"sourceRoot":""}